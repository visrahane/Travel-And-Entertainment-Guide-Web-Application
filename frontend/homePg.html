<!DOCTYPE html>
<html lang="en">

<head>
    <title>Bootstrap Example</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="travel.css">
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">

</head>

<body ng-app="loadApp" ng-controller="locController" ng-init="disableSearchBtn=true">
    <div class="container">
        <form name="searchForm">
            <div class="card bg-light text-dark">
                <div class="card-body">
                    <h4 class="card-title">Travel and Entertainment Search</h4>
                    <div class="form-group">
                        <div class="row">
                            <div class="col-sm-3">
                                <label>Keyword
                                    <span style="color:red">*</span>
                                </label>
                            </div>
                            <div class="col-sm-3">
                                <input type="text" pattern="^\S+$" ng-model="keyword" class="form-control" id="keyword" name="keyword" required>
                                <span style="color:red" ng-show="searchForm.keyword.$touched && searchForm.keyword.$invalid">Please enter a keyword.</span>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="row">
                            <div class="col-sm-3">
                                <label for="category">Category</label>
                            </div>
                            <div class="col-sm-3">
                                <select class="form-control" id="category" ng-model="category" ng-init="category='default'">
                                    <option value="default">Default</option>

                                    <option value="airport">Airport</option>
                                    <option value="amusement_park">Amusement Park</option>
                                    <option value="aquarium">Aquarium</option>
                                    <option value="art_gallery">Art Gallery</option>

                                    <option value="bakery">Bakery</option>
                                    <option value="bar">Bar</option>
                                    <option value="beauty_salon">Beauty Salon</option>
                                    <option value="bowling_alley">Bowling Alley</option>
                                    <option value="bus_station">Bus Station</option>

                                    <option value="cafe">Cafe</option>
                                    <option value="campground">Campground</option>
                                    <option value="car_rental">Car Rental</option>
                                    <option value="casino">Casino</option>

                                    <option value="lodging">Lodging</option>
                                    <option value="movie_theater">Movie Theater</option>
                                    <option value="museum">Museum</option>
                                    <option value="night_club">Night Club</option>
                                    <option value="park">Park</option>
                                    <option value="parking">Parking</option>
                                    <option value="restaurant">Restaurant</option>
                                    <option value="shopping_mall">Shopping Mall</option>
                                    <option value="stadium">Stadium</option>
                                    <option value="subway_station">Subway Station</option>
                                    <option value="taxi_stand">Taxi Stand</option>

                                    <option value="train_station">Train Station</option>
                                    <option value="transit_station">Transit Station</option>
                                    <option value="travel_agency">Travel Agency</option>
                                    <option value="zoo">Zoo</option>

                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-3">
                            <label for="distance">Distance</label>
                        </div>
                        <div class="col-sm-3">
                            <input type="text" class="form-control" id="distance" placeholder="10" name="distance" ng-init="10" ng-model="distance">
                        </div>
                    </div>
                    <div class="radio">
                        <div class="row">
                            <div class="col-sm-3">
                                <label>From
                                    <span style="color:red">*</span>
                                </label>
                            </div>
                            <div class="col-sm-3">
                                <label>
                                    <input type="radio" name="location" ng-click="disableLocTxt=!disableLocTxt" checked> Current location</label>
                            </div>
                        </div>
                        <div class="radio">
                            <div class="row">
                                <div class="col-sm-3"></div>
                                <div class="col-sm-3">
                                    <label>
                                        <input type="radio" name="location" ng-click="disableLocTxt=!disableLocTxt"> Other, Please specify:</label>
                                </div>

                            </div>
                            <div class="row">
                                <div class="col-sm-3"></div>
                                <div class="col-sm-3">
                                    <input type="search" class="form-control" id="locationOther" placeholder="Enter a location" name="locationOther" ng-init="disableLocTxt=true"
                                        ng-disabled="disableLocTxt" ng-init="location=here" ng-model="location" ng-required="!disableLocTxt">
                                    <span style="color:red" ng-show="searchForm.locationOther.$touched && searchForm.locationOther.$invalid">Please enter a location.</span>
                                    <!--onfocus="geolocate()" -->
                                </div>

                            </div>
                            <div class="form-group"></div>
                            <button type="submit" ng-click="showProgressBar=true;submitFormData()" class="btn btn-primary" ng-disabled="searchForm.$invalid || latitude==null">

                                <span class="fa fa-search"></span>Search
                            </button>
                            <button type="button" class="btn btn-outline-secondary">
                                Clear
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </form>

        <!--Results and Favorites buttons -->
        <div class="text-center">
            <button type="button" class="btn btn-primary">
                Results
            </button>
            <button type="button" class="btn btn-outline-light text-dark">
                <span style="color:blue;">Favorities</span>
            </button>
        </div>
        <div class="animate-hide-r-l" ng-init="showFirstPg=true" ng-show="showFirstPg">
            <!--details button -->
            <div class="detailsBtn">
                <button type="button" id="detailsBtnId" class="btn btn-outline-dark" disabled ng-hide="results==null || results.length==0">
                    Details
                </button>
            </div>

            <!--search results table -->
            <div class="table-responsive" ng-hide="results==null || results.length==0">
                <table class="table">
                    <tr>
                        <th>#</th>
                        <th>Category</th>
                        <th>Name</th>
                        <th>Address</th>
                        <th>Favorite</th>
                        <th>Details</th>
                    </tr>
                    <tr ng-repeat="result in results track by $index">
                        <td>{{$index+1}}</td>
                        <td>
                            <img style="height: 45px; width: 45px;" ng-src="{{ result.icon }}" />
                        </td>
                        <td>{{ result.name }}</td>
                        <td>{{ result.vicinity }}</td>
                        <td>
                            <button class="btn btn-outline-dark">
                                <span class="fa fa-star-o"></span>
                            </button>
                        </td>
                        <td>
                            <button class="btn btn-outline-dark" ng-click="getDetails($index)">
                                <span class="fa fa-angle-right" style="font-size: 19px;"></span>
                            </button>

                        </td>
                    </tr>
                </table>
            </div>
            <!--Pagination buttons -->
            <div class="text-center">
                <button type="button" id="prevBtn" class="btn btn-outline-dark equal-btn hidden" ng-click="showProgressBar=true;fetchPrev()"
                    style="margin-right:18px">
                    Previous
                </button>
                <button type="button" id="nextBtn" class="btn btn-outline-dark equal-btn hidden" ng-click="showProgressBar=true;fetchNext()">
                    Next
                </button>
            </div>
        </div>

        <!--Progress Bar -->
        <div class="progress" id="progressBar" ng-init="showProgressBar=false" ng-show="showProgressBar">
            <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" aria-valuenow="50" aria-valuemin="0"
                aria-valuemax="100" style="width: 50%">
            </div>
        </div>

        <!--Error Tab -->
        <div class="alert alert-danger" ng-init="showErrorBox=false" ng-show="showErrorBox">
            Failed To get search results.
        </div>

        <!--No records box -->
        <div class="alert alert-warning" ng-init="showNoRecordsBox=false" ng-show="showNoRecordsBox">
            No records.
        </div>
        <!--DetailsPg -->
        <div class="card animate-hide-l-r" style="border:0;" ng-init="showDetailsPg=false" ng-show="showDetailsPg">
            <div class="card-body">
                <h4 class="card-title">{{title}}</h4>
                <!--<List -->
                <div class="listBtn">
                    <button type="button" id="listBtnId" class="btn btn-outline-dark" ng-click="showFirstPg=true;
                    showDetailsPg=false;">
                        <span class="fa fa-angle-left" style="font-weight: bold;"></span> List
                    </button>
                </div>
                <ul class="nav nav-tabs justify-content-end" role="tablist">
                    <li class="nav-item">
                        <a class="nav-link active" data-toggle="tab" href="#info">Info</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" data-toggle="tab" href="#photos">Photos</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" data-toggle="tab" href="#mapTab" ng-click="initMap();setDest();initStreetView();">Map</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" data-toggle="tab" href="#reviews">Reviews</a>
                    </li>
                </ul>

                <!-- Tab panes -->

                <div class="tab-content">
                    <div id="info" class="container tab-pane active">
                        <br/>

                        <table class="table table-striped">
                            <tr>
                                <th>Address</th>
                                <td>{{details.formatted_address}}</td>
                            </tr>
                            <tr>
                                <th>Phone Number</th>
                                <td>{{details.international_phone_number}}</td>
                            </tr>
                            <tr>
                                <th>Price Level</th>
                                <td>{{details.price_level}}</td>
                            </tr>
                            <tr>
                                <th>Rating</th>
                                <td>{{details.rating}}</td>
                            </tr>
                            <tr>
                                <th>Google Page</th>
                                <td>
                                    <a href={{details.url}}>{{details.url}}</a>
                                </td>
                            </tr>
                            <tr>
                                <th>Website</th>
                                <td>
                                    <a href={{details.website}}>{{details.website}}</a>
                                </td>
                            </tr>
                            <tr>
                                <th>Hours</th>
                                <td></td>
                            </tr>
                        </table>
                    </div>
                    <!-- Photos Gallery -->
                    <div id="photos" class="container tab-pane fade">


                    </div>
                    <!-- Map-->
                    <div id="mapTab" class="container tab-pane fade">
                        <!--Start loc, from -->
                        <div class="form-group container" style="padding-left: 0;">
                            <div class="row" >
                                <div class="col-sm-4">
                                    <label for="from">From</label>
                                </div>
                                <div class="col-sm-4">
                                    <label for="to">To</label>
                                </div>
                                <div class="col-sm-2">
                                    <label for="from">Travel Mode</label>
                                </div>
                                <div class="col-sm-2">                                 
                                </div>
                            </div>
                            <div class="row" >
                                <div class="col-sm-4">
                                    <input type="text" class="form-control" id="start" placeholder="Your Location">
                                </div>
                                <div class="col-sm-4">
                                    <input type="text" class="form-control" id="dest" readonly ng-model="destinationLoc">
                                </div>
                                <div class="col-sm-2">
                                    <select class="form-control" id="modeOfTransport">
                                        <option value="DRIVING" selected>Driving</option>
                                        <option value="WALKING">Walking</option>
                                        <option value="BICYCLING">Bicycling</option>
                                        <option value="TRANSIT">Transit</option>
                                    </select>
                                </div>
                                <div class="col-sm-2">
                                    <button type="button" style="margin-left:15%;" class="btn btn-primary" ng-click="getDirections()">
                                        Get Directions
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <!--PegMan -->
                        <button type="button" class="btn btn-outline-secondary" ng-init="showStreetView=false" ; ng-click="setImage();showStreetView=!showStreetView">
                            <img ng-src={{mapBtnSrc}} ng-init="mapBtnSrc='http://cs-server.usc.edu:45678/hw/hw8/images/Pegman.png'" style="height: 32px;width: 32px;">
                        </button>
                        <div id="map" ng-show="!showStreetView"></div>

                        <div id="streetView" ng-show="showStreetView"></div>
                        <div id="directionInfo"></div>
                    </div>
                    <!-- Reviews-->
                    <div id="reviews" class="container tab-pane fade">
                        <form class="form-inline">
                            <!--reviews dropdown -->
                            <div class="dropdown">
                                <button type="button" ng-init="selectedReview='Google Reviews'" ng-bind="selectedReview" class="btn btn-secondary dropdown-toggle"
                                    data-toggle="dropdown">
                                    {{selectedReview}}
                                </button>
                                <div class="dropdown-menu">
                                    <a class="dropdown-item" ng-click="selectedReview='Google Reviews'">Google Reviews</a>
                                    <a class="dropdown-item" ng-click="selectedReview='Yelp Reviews'">Yelp Reviews</a>

                                </div>
                            </div>

                            <div class="dropdown" style="margin-left: 2%;">
                                <button type="button" ng-init="selectedOrder='Default Order'" ng-bind="selectedOrder" class="btn btn-secondary dropdown-toggle"
                                    data-toggle="dropdown">
                                    {{selectedOrder}}
                                </button>
                                <div class="dropdown-menu">
                                    <a class="dropdown-item" ng-click="selectedOrder='Default Order'">Default Order</a>
                                    <a class="dropdown-item" ng-click="selectedOrder='Highest Rating'">Highest Rating</a>
                                    <a class="dropdown-item" ng-click="selectedOrder='Lowest Rating'">Lowest Rating</a>
                                    <a class="dropdown-item" ng-click="selectedOrder='Most Recent'">Most Recent</a>
                                    <a class="dropdown-item" ng-click="selectedOrder='Least Recent'">Least Recent</a>
                                </div>
                            </div>



                        </form>

                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>


<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular-touch.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular-animate.min.js"></script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDWBtO4XwwiZCwCDr6z2aK8rXZMuO0OTNM&libraries=places&callback=initAutocomplete"
    async defer></script>
<script src="travel.js"></script>

</html>